---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2024/12/18 16:32
---

local GuideState = Clazz(BaseFsmState, "GuideState")
local this = GuideState

function GuideState:New()
    local o = {}
    setmetatable(o, { __index = GuideState })
    return o
end

function GuideState:GuideState()
end

function GuideState:OnEnter(fsm, previous)
    self._fsm = fsm
    self._owner = fsm:GetOwner()
    self:start_x_update()
end

function GuideState:on_x_update()
    if self._owner.GotYouSmallGameView then
        if self._owner.GotYouSmallGameView:GetCurrentAnimatorStateInfo(0):IsName("idle") then
            self:stop_x_update()
            self:PlayGuideEnter()
        end
    end
end

function GuideState:PlayGuideEnter()
    if not ModelList.GuideModel:IsGuideComplete(89) and ModelList.BattleModel:IsGameing() then
        --if not ModelList.GuideModel:IsGuideComplete(89)  then
        --self._owner:ShowGuide(1)
        self:LoadAtlasAndShowGuide()
        --fsm:ChangeState("IdleState")
    else
        --fsm:ChangeState("IdleState")
        self._fsm:ChangeState("ShowBingoState")
    end
end

function GuideState:LoadAtlasAndShowGuide()
    local guideAtlas = "GotYouSmallGameGuideAtlas"
    Cache.Load_Atlas(AssetList[guideAtlas], guideAtlas, function ()
        self._owner:ShowGuide(1)
    end)
end

function GuideState:OnSpin()

end

function GuideState:OnChangeBet(changeType)

end

function GuideState:OnReceiveSpin()
end

function GuideState:OnStopIdle()

end

function GuideState:OnResumeIdle()

end

function GuideState:OnLeave(fsm)
    self._fsm = nil
    self._owner = nil
end

function GuideState:Dispose()
    self:OnLeave(nil)
end

return this
