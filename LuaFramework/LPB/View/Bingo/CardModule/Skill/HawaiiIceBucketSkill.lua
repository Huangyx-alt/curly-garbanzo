---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/10/11 17:25
--- 夏威夷冰桶技能，每种酒水+1

local BaseSkill =  require("View.Bingo.CardModule.Skill.BaseSkill")

local HawaiiIceBucketSkill = BaseSkill:New("HawaiiIceBucketSkill")
setmetatable(HawaiiIceBucketSkill,BaseSkill)
local this = HawaiiIceBucketSkill

function HawaiiIceBucketSkill:ShowHawaiiIceBucketSkill(cardId, cellIndex, powerId)
    self:SaveSkillInfo(cardId,nil)
    Event.Brocast(EventName.Event_Logic_Collect_Item,cardId,cellIndex,1,1)
    Event.Brocast(EventName.Event_Logic_Collect_Item,cardId,cellIndex,2,1)
    Event.Brocast(EventName.Event_Logic_Collect_Item,cardId,cellIndex,3,1)
    Event.Brocast(EventName.Event_Logic_Collect_Item,cardId,cellIndex,4,1)
    local target = self:GetCardPower().cardView:GetCardCell(tonumber(cardId), cellIndex)
    BattleEffectCache:GetSkillPrefabFromCache("cityget", target, nil, 2)
    --LuaTimer:SetDelayFunction(0.5, function()
    local targetObj = self:GetCardPower().cardView:GetCardMap(tonumber(cardId))
    BattleEffectCache:GetSkillPrefabFromCache("XWYJejBt", targetObj, function(obj)
        self:SaveSkillInfo(cardId,obj)
        --UISound.play("city1_skill")
        local reftemp = fun.get_component(obj,fun.REFER)
        fun.set_same_position_with_but_z_zero(obj, self:GetCardPower().cardView:GetCardMap(tonumber(cardId)))
        self:SameScaleWithCard(obj, cardId)
        UISound.play("hawaii_IceBucket")
        LuaTimer:SetDelayFunction(1.9, function()
            local redObj = reftemp:Get("bingoclickred")
            --fun.set_same_position_with(obj, self:GetCardPower().cardView:GetCardCell(tonumber(cardId), cellIndex))
            Event.Brocast(EventName.Event_Collect_Item_By_Skill, redObj, cardId, 1)
        end,nil,LuaTimer.TimerType.Battle)
        LuaTimer:SetDelayFunction(2.45, function()
            local greenObj = reftemp:Get("bingoclickgreen")
            --fun.set_same_position_with(obj, self:GetCardPower().cardView:GetCardCell(tonumber(cardId), cellIndex))
            Event.Brocast(EventName.Event_Collect_Item_By_Skill, greenObj, cardId, 2)
        end,nil,LuaTimer.TimerType.Battle)
        LuaTimer:SetDelayFunction(2.2, function()
            local yellowObj = reftemp:Get("bingoclickyellow")
            --fun.set_same_position_with(obj, self:GetCardPower().cardView:GetCardCell(tonumber(cardId), cellIndex))
            Event.Brocast(EventName.Event_Collect_Item_By_Skill, yellowObj, cardId, 3)
        end,nil,LuaTimer.TimerType.Battle)
        LuaTimer:SetDelayFunction(2.35, function()
            local purpleObj = reftemp:Get("bingoclickpurple")
            --fun.set_same_position_with(obj, self:GetCardPower().cardView:GetCardCell(tonumber(cardId), cellIndex))
            Event.Brocast(EventName.Event_Collect_Item_By_Skill, purpleObj, cardId, 4)
        end,nil,LuaTimer.TimerType.Battle)
        LuaTimer:SetDelayFunction(4.5, function()
            self:RemoveSkillInfo(obj)
            BattleEffectPool:Recycle("XWYJejBt",obj)
            --Destroy(obj)
        end,nil,LuaTimer.TimerType.Battle)
    end,0,cardId)
    --end)
end

return this