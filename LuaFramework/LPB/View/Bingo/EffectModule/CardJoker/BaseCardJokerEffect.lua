---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2023/5/19 14:25
---
local BaseCardJokerEffect = {}

--创建View对象--
function BaseCardJokerEffect:New()
    local o = { isLoaded = false, changeSceneClear = true}
    self.__index = self
    setmetatable(o, self)
    return o
end

---基类继承
function BaseCardJokerEffect:Init(cardView)
    self.model = ModelList.BattleModel:GetCurrModel()
    self.cardView = cardView
end

---基类继承
function BaseCardJokerEffect:SetInfo(info,parentObj)

end

---基类继承
function BaseCardJokerEffect:Play()

end

---基类继承
function BaseCardJokerEffect:Destory()

end

---基类继承
function BaseCardJokerEffect:GetPrefab()
    return self.go
end

---基类继承
function BaseCardJokerEffect:GetCardView()
    return  self.cardView
end

---基类继承
function BaseCardJokerEffect:GetJokerCellObj(cardId,cellIndex,referName)
    if not referName then
        referName = "Joker"
    end
    return ModelList.BattleModel:GetCurrModel():GetRoundData(cardId, cellIndex):GetCellReferScript(referName)
end

---基类继承
function BaseCardJokerEffect:GetCellObj(cardId,cellIndex)
    return ModelList.BattleModel:GetCurrModel():GetRoundData(cardId, cellIndex):GetCellObj()
end

function BaseCardJokerEffect:CoroutineLoadResource(callback)
    coroutine.start(function()
        if callback then
            callback()
        end
    end)
end

function BaseCardJokerEffect:GetLoadedResource(resName,parentRef,abName)
    if parentRef then
        return parentRef:GetPreloadPrefab(resName)
    end
    if abName then
        log.r("GetLoadedResource  null  load_prefabs "..abName)
        Cache.load_prefabs(AssetList[abName], resName, function(prefab)
            if prefab then
                local obj = fun.get_instance(prefab)
                if obj then
                    return obj
                end
            end
        end)
    end
    return nil
end


---基类继承
---设置卡牌格子相关的数据变化
---@param changeType number @变化类型   1.变资源 2.变小丑区域 3.变吹吹卷 4.变双倍金币
function BaseCardJokerEffect:SetCellChange(cardId,cellIndex,changeType,...)
    if cellIndex == 0 then
        log.r("坐标错误,检查数据")
        return
    end
    self.model:GetRoundData(cardId,cellIndex):SetJokerChange(changeType,...)
end

return BaseCardJokerEffect