---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/6/29 17:23
---


local ApplicationGuideInfo = require("Guide.ApplicationGuide.ApplicationGuideInfo")
---  HallCityView
---@class  HallCityViewGuide : ApplicationGuideInfo
local HallCityViewGuide = ApplicationGuideInfo:New()
local this = HallCityViewGuide

function HallCityViewGuide:Init()
    --this:Register()
    this:DelayCheck()
end

local function RemoveDelay()
    if this.delay_show then
        LuaTimer:Remove(this.delay_show)
        this.delay_show = nil
    end
end

function HallCityViewGuide:Remove()
    --this:Register()
    RemoveDelay()
    this:PlayFingerEffect(nil,true,nil,true)
end

function HallCityViewGuide:DelayCheck()
    RemoveDelay()
    this.delay_show = LuaTimer:SetDelayFunction(this.data[1].delay_time,function()
        this.delay_show = nil
        this:Check()
    end,nil,LuaTimer.TimerType.UI)
end

function HallCityViewGuide:Check()
    local showFinger = false
    for i = 1, #this.data do
        if this:IsSatisfy(this.data[i].startcondition,this.data[i])  then
            local view = this:GetGuideView(this.data[i])
            if view then
                this:PlayFingerEffect(view,false,this.data[i])
                showFinger = true
                break
            end
        end
    end
    if not showFinger then
        this:DelayCheck()
    end
end

function HallCityViewGuide:Register()

end

return this