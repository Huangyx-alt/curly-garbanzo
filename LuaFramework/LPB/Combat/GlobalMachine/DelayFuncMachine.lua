---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/3/26 15:11
---

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/3/26 14:06
---
---  维持较高频率战斗心跳机器
require("Combat/BaseMachine")

DelayFuncMachine = BaseMachine:New("DelayFuncMachine")

local this = DelayFuncMachine
this.timeList = nil

function DelayFuncMachine:Start()
    this.timeList = {}
end

function DelayFuncMachine:Pause(isPause)

end


function DelayFuncMachine:Stop()
    this:RemoveAllFunc()
end

function DelayFuncMachine:AddFunc(delayTime,func)
    local delayFunc = LuaTimer:SetDelayFunction(delayTime, function()
        func()
        for i = 1, #this.timeList do
            if this.timeList[i] == delayFunc then
                table.remove(this.timeList,i)
                break
            end
        end
        LuaTimer:Remove(delayTime)
    end)
    table.insert(this.timeList,delayFunc)
end

function DelayFuncMachine:RemoveAllFunc()
    if this.timeList then
        for i = 1, #this.timeList do
            LuaTimer:Remove(this.timeList[i])
        end
        this.timeList={}
    end
end


function DelayFuncMachine.Register()

end

function DelayFuncMachine.UnRegister()

end



return this