---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 19/11/2024 上午 10:45
---


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 18/11/2024 下午 4:05
---


-- 棋盘的大小
local gridSize = 5
local colors = { "red", "green" } -- 定义可用颜色

-- 随机给每个格子涂色
function generateRandomColors()
    local gridColors = {}
    --for i = 1, gridSize * gridSize do
    --    -- 随机选择一个颜色
    --    gridColors[i] = colors[math.random(#colors)]
    --end
    gridColors[1] = "1"
    gridColors[2] = "1"
    gridColors[3] = "0"
    gridColors[4] = "0"
    gridColors[5] = "1"
    gridColors[6] = "0"
    gridColors[7] = "0"
    gridColors[8] = "0"
    gridColors[9] = "0"
    gridColors[10] = "0"
    gridColors[11] = "0"
    gridColors[12] = "0"
    gridColors[13] = "0"
    gridColors[14] = "0"
    gridColors[15] = "0"
    gridColors[16] = "0"
    gridColors[17] = "0"
    gridColors[18] = "0"
    gridColors[19] = "0"
    gridColors[20] = "0"
    gridColors[21] = "1"
    gridColors[22] = "1"
    gridColors[23] = "0"
    gridColors[24] = "0"
    gridColors[25] = "0"



    return gridColors
end

-- 检查给定的格子周围的区域是否能组成指定大小的形状
function checkPattern(gridColors, startX, startY, width, height)
    local firstColor = gridColors[(startY * gridSize) + (startX + 1)] -- 获取左上角格子的颜色
    for j = 0, height - 1 do
        for i = 0, width - 1 do
            local x = startX + i
            local y = startY + j
            if x < 0 or y < 0 or x >= gridSize or y >= gridSize then
                return false -- 超出边界
            end
            if gridColors[(y * gridSize) + (x + 1)] ~= firstColor then
                return false -- 颜色不一致
            end
        end
    end
    --print(string.format("找到一致的颜色区域，左上角格子序号: %d   %d   %d", (startY * gridSize) + (startX + 1),(startX), (startY)))
    return true -- 找到一致的颜色区域
end

-- 检查可能的图案
function checkAllPatterns(gridColors)
    local patterns = {
        { 3, 3 },
        { 3, 4 },
        { 4, 3 },
        { 4, 4 },
        { 5, 5 },
    }

    for _, pattern in ipairs(patterns) do
        local width, height = pattern[1], pattern[2]
        for y = 0, gridSize - width do
            for x = 0, gridSize - height do
                if checkPattern(gridColors, x, y, width, height) then
                    print(string.format("找到一个 %dx%d 的图案，左上角格子序号: %d", width, height, (y * gridSize) + (x + 1)))
                end
            end
        end
    end
end

-- 主程序
function main()
    math.randomseed(os.time())                -- 设置随机种子
    local gridColors = generateRandomColors() -- 随机涂色

    -- 显示涂色后的棋盘
    print("涂色后的棋盘：")
    for y = 0, gridSize - 1 do
        for x = 0, gridSize - 1 do
            io.write(string.format("%s\t", gridColors[(x * gridSize) + (y + 1)]))
        end
        io.write("\n")
    end

    -- 检查所有可能的图案
    checkAllPatterns(gridColors)
end

-- 运行主程序
main()


--
--local data = {
--
--    firstCellIndex = 2,
--    width = 3,
--    height = 3,
--    weight = 3 * 3, -- 权重，可以自定义
--}
--
--local cells = {}
--if data then
--    for i = 0, data.width-1 do
--        for j = 0, data.height-1 do
--            table.insert(cells, data.firstCellIndex + j+i*5)
--        end
--    end
--end
--for i = 1, #cells do
--    print(cells[i])
--end
--print(cells)

