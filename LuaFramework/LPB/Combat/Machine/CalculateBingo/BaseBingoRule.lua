---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/10/12 10:43
---
--- 基础bingo jackpot规则
local BaseBingoRule ={}
local this = BaseBingoRule
BaseBingoRule.__index = BaseBingoRule

this.BingoType = {BINGO = 1,JACKPOT = 2}

function  BaseBingoRule:InitData ()
    self.totalBingoCount = {}
end

function  BaseBingoRule:AddTotalBingoCount (cardId)
    cardId = tonumber(cardId)
    
    if self.totalBingoCount[cardId] then
        self.totalBingoCount[cardId] = self.totalBingoCount[cardId] + 1
    else
        self.totalBingoCount[cardId] = 1
    end

    if BingoBangEntry.IsInBattleSettle then
        BingoBangEntry.LuckyBangTriggerBingoCount = BingoBangEntry.LuckyBangTriggerBingoCount + 1
    end
end

function BaseBingoRule:GetTotalBingoCount(cardId)
    cardId = tonumber(cardId)
    
    if self.totalBingoCount and  self.totalBingoCount[cardId] then
        return self.totalBingoCount[cardId]
    end
    return 0
end

function BaseBingoRule:CreateBingoInfo(bingoType, numbers,cardId)
    cardId = tonumber(cardId)
    local needForbidCard = ModelList.BattleModel:GetCurrModel():CheckIsMaxBingo(cardId)
    if needForbidCard then
        --达到Bingo上限
        return
    end
    
    self:AddTotalBingoCount(cardId)
    local bingoInfo = { 
        type = bingoType, 
        numbers = deep_copy(numbers),
        cardId = cardId, 
        totolCount = self.totalBingoCount[cardId], 
        th = BingoOrderMachine:GetRecordBingoOrder(cardId) 
    }
    return bingoInfo
end

function BaseBingoRule:Start(data)

end

function BaseBingoRule:Stop()

end
function BaseBingoRule:Pause(isPause)

end
function BaseBingoRule:CalcuateBingo(cardId, cellIndex)

end

function BaseBingoRule:PreCalculateBingo(num)

end
function BaseBingoRule:BeBingoCell(cardId,cellIndex,cardNum)

end

function BaseBingoRule:CalculateWishByCard(cardId)

end
function BaseBingoRule:CalculateBingo(cardId,cellIndex)

end

function BaseBingoRule:OnDataChange(cardId,cellIndex,...)
end

---提供一个查询接口,再内部自定义逻辑
---@param seekType number 查询类型99查询是否等待表现结束
function BaseBingoRule:SeekInfo(seekType,...)
    if seekType == 99 then  --查询是否等待表现结束
        return true
    end
    return nil
end

--- 提供一个设置接口，再内部自定义逻辑
function BaseBingoRule:SetInfo(setType,...)

end

function BaseBingoRule:CancelAllBingoCell()
    
end


function BaseBingoRule:New(name)
    local o = {name=name}
    setmetatable(o,self)
    self.__index = self
    return o
end

return this


