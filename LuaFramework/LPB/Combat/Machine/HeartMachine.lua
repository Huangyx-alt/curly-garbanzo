---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/3/26 14:06

---  维持较高频率战斗心跳机器

require("Combat/BaseMachine")

HeartMachine = BaseMachine:New("HeartMachine")

local this = HeartMachine


function HeartMachine:Start()
    this:AppHeartBeat()
end

function HeartMachine:Pause(isPause)

end

function HeartMachine:on_x_update()
    
end

function HeartMachine:Stop()
    this:RemoveBattleHeartBeat()
end

function HeartMachine:AppHeartBeat()
    local delay = 3 --心跳间隔,3次后没有响应则弹窗
    this:Stop()
    this._heartBeatHandle = InvokeRepeat(function()
        if Network.isConnect then
            Network.SendMessage(MSG_ID.MSG_PING,{isPlaying = 1},true);
        end
    end,delay,-1 )
end


function HeartMachine:RemoveBattleHeartBeat()
    if this._heartBeatHandle ~= nil then
        this._heartBeatHandle:Stop()
        this._heartBeatHandle = nil
    end
end

function HeartMachine.Register()

end

function HeartMachine.UnRegister()

end


function HeartMachine:CheckLeftTime()

end


return this