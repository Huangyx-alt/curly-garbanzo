---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 15610.
--- DateTime: 2023/4/22 22:57
---

local QuickTaskBaseState = require "State/QuickTaskView/QuickTaskBaseState"
local CompetitionFlyCookieState = Clazz(QuickTaskBaseState,"CompetitionFlyCookieState")

function CompetitionFlyCookieState:OnEnter(fsm,previous,...)
    if fsm and self:CheckSkip() then
        return
    end
    log.r("enter  CompetitionFlyCookieState")
    --self.changeTarget = ({ ... })[1]
    --local cookeyRoot = ({ ... })[2]
    --fsm:GetOwner():OnFlyCooky(cookeyRoot)
    --fsm:GetOwner():SaveQuickTaskId()
    --UISound.play("kick_reward")

    if fsm:GetOwner():IsHasCookie() then
        fsm:GetOwner():OnFlyCooky2()
    else
        CompetitionFlyCookieState:TweenSliderFinish(fsm)
    end
end

function CompetitionFlyCookieState:OnLeave(fsm)
    --UISound.stop_loop("task_item_out")
end

function CompetitionFlyCookieState:TweenSliderFinish(fsm)
    --if fsm then
    --    if self.changeTarget == 1 then
    --        self:ChangeState(fsm,"QuickTaskNoAchieveState",self.changeTarget)
    --    elseif self.changeTarget == 2 then
    --        self:ChangeState(fsm,"QuickTaskAchieveState",self.changeTarget)
    --    end
    --end

    if fsm then
        if fsm:GetOwner():IsCompetitionGetReward() then
            self:ChangeState(fsm,"QuickTaskAchieveState",2)
        else
            self:ChangeState(fsm,"QuickTaskNoAchieveState",1)
        end
        --fsm:GetOwner():SetNextLoop(true)
    end
end
return  CompetitionFlyCookieState