---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2021/8/29 22:04
---

CityDragLeftLimitState = Clazz(CityDragBaseState,"CityDragLeftLimitState")

function CityDragLeftLimitState:OnEnter(fsm,previous,...)
    self._fsm = fsm
    self._owner = fsm:GetOwner()

    local params = ({ ... })[1]
    if params then
        self._posX = params
    else
        self._posX = self._owner:GetHangPointPosX()
    end
end

function CityDragLeftLimitState:OnLeave(fsm)
    self._fsm = nil
    self._owner = nil
    self._posX = nil
end

function CityDragLeftLimitState:Dispose()
    self:OnLeave(nil)
end

function CityDragLeftLimitState:OnDragCity(state,go,startPos,pos,deltaTime)
    if state == LuaEasyTouchDragState.enddrag then
        self:ChangeState(self._fsm,"CityDragLimitEndState",1)
        return
    end
    if state == LuaEasyTouchDragState.dragging then
        if startPos.x < pos.x then
            self:ChangeState(self._fsm,"CityDragRightState")
            return
        end
        --self._owner:OnDragLeftMove(pos,self._posX - 100)
        self._owner:OnDragLeftMove(pos,true)
    end
end