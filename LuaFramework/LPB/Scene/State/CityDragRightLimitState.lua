---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2021/8/29 22:07
---

CityDragRightLimitState = Clazz(CityDragBaseState,"CityDragRightLimitState")

function CityDragRightLimitState:OnEnter(fsm,previous,...)
    self._fsm = fsm
    self._owner = fsm:GetOwner()

    local params = ({ ... })[1]
    if params then
        self._posX = params
    else
        self._posX = self._owner:GetHangPointPosX()
    end
end

function CityDragRightLimitState:OnLeave(fsm)
    self._fsm = nil
    self._owner = nil
    self._posX = nil
end

function CityDragRightLimitState:Dispose()
    self:OnLeave(nil)
end

function CityDragRightLimitState:OnDragCity(state,go,startPos,pos,deltaTime)
    if state == LuaEasyTouchDragState.enddrag then
        self:ChangeState(self._fsm,"CityDragLimitEndState",2)
        return
    end
    if state == LuaEasyTouchDragState.dragging then
        if startPos.x > pos.x then
            self:ChangeState(self._fsm,"CityDragLeftState")
            return
        end
        --self._owner:OnDragRightMove(pos,self._posX + 100)
        self._owner:OnDragRightMove(pos,true)
    end
end