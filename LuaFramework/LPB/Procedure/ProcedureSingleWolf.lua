---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2023/2/7 15:51
---
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/10/11 11:03
---


local ProcedureSingleWolf = Clazz(BaseProcedure,"ProcedureSingleWolf")
local isEnter = false
local isShowReady = false

function ProcedureSingleWolf:New()
    local o = {}
    setmetatable(o,{__index = ProcedureSingleWolf})
    return o
end

function ProcedureSingleWolf:OnEnter(fsm,lastName)
    isEnter = true
    ProcedureSingleWolf:StartShow()
    --Facade.RegisterCommand(NotifyName.Bingo.ShowBingoView,CmdCommonList.CmdShowBingoView)
    --Facade.SendNotification(NotifyName.Bingo.ShowBingoView,ViewList.HawaiiBingoView)

    --local game_ui = fun.GameObject_find("Canvas/GameUI/NormalNode")
    --local gameBingoView =  fun.find_child(game_ui,"SingleWolfBingoView")
    --Facade.SendNotification(NotifyName.SkipLoadShowUI,ViewList.SingleWolfBingoView,gameBingoView )

    --local game_ui = fun.GameObject_find("Canvas/GameUI/NormalNode")
    --local getReadyView =  fun.find_child(game_ui,"SingleWolfReadyView")
    --Facade.SendNotification(NotifyName.SkipLoadShowUI,ViewList.SpecialPlayReadyView ,getReadyView )
    --if ViewList.SceneLoadingGameView and ViewList.SceneLoadingGameView.go then
    --    ViewList.SceneLoadingGameView:FadeOut()
    --end
end

function ProcedureSingleWolf:ShowReadyView(cb)
    isShowReady = true
    ProcedureSingleWolf:StartShow(cb)
end

function ProcedureSingleWolf:StartShow(cb)
    if isShowReady and isEnter then
        local game_ui = fun.GameObject_find("Canvas/GameUI/NormalNode")
        local gameBingoView =  fun.find_child(game_ui,"SingleWolfBingoView")
        Facade.SendNotification(NotifyName.SkipLoadShowUI,ViewList.SingleWolfBingoView,gameBingoView )
        local game_ui = fun.GameObject_find("Canvas/GameUI/NormalNode")
        local getReadyView =  fun.find_child(game_ui,"SingleWolfReadyView")
        Facade.SendNotification(NotifyName.SkipLoadShowUI,ViewList.SpecialPlayReadyView ,getReadyView, nil, nil, true, {
            onBattleStart = self.showCompleteCb or cb
        })
        self.showCompleteCb = nil
        if ViewList.SceneLoadingGameView and ViewList.SceneLoadingGameView.go then
            ViewList.SceneLoadingGameView:FadeOut()
        end
    else
        self.showCompleteCb = cb
    end
end

function ProcedureSingleWolf:OnLeave(fsm)
    isEnter = false
    isShowReady = false
    Facade.RemoveCommand(NotifyName.Bingo.ShowBingoView)
end

function ProcedureSingleWolf:ProcedureName()
    return "ProcedureSingleWolf"
end

function ProcedureSingleWolf:GetCurrentSceneName()
    return "SceneSingleWolf"
end

return ProcedureSingleWolf