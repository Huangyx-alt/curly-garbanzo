---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2021/7/2 10:09
---

local Command = {}

function Command.Execute(notifyName,scene_name,callback)
    if( AppConst.IsEditorModel() and  fun.IsEditor())then
        print("=======================================================>>LoadSceneAsync " .. scene_name)
        Command.LoadSceneEditor(scene_name,callback)   --编辑器模式直接跑Scene下面
    else
        local ab_name = AssetList[scene_name] --"luaprefab_scene"
        resMgr:LoadScene(ab_name,scene_name,function()
            SceneViewManager.prev_scene_name = SceneViewManager.current_scene_name
            SceneViewManager.current_scene_name = scene_name
            log.r("lxq 场景切换",tostring(SceneViewManager.prev_scene_name),">>>",tostring(SceneViewManager.current_scene_name))
            local operation  = UnityEngine.SceneManagement.SceneManager.LoadSceneAsync(scene_name)
            if callback then
                callback(operation)
            end
        end)
    end
end

function Command.LoadSceneEditor(scene_name,callback)
    SceneViewManager.prev_scene_name = SceneViewManager.current_scene_name
    SceneViewManager.current_scene_name = scene_name
    log.r("lxq 场景切换",tostring(SceneViewManager.prev_scene_name),">>>",tostring(SceneViewManager.current_scene_name))
    local operation  = UnityEngine.SceneManagement.SceneManager.LoadSceneAsync(scene_name)
    if callback then
        callback(operation)
    end
end

return Command