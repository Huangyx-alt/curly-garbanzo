---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2021/8/29 20:40
---

CityDragLeftState = Clazz(CityDragBaseState,"CityDragLeftState")

function CityDragLeftState:OnEnter(fsm,lastName,...)
    self._fsm = fsm
    self._owner = fsm:GetOwner()
    if self._owner then
        self._owner:OnDragLeft()
    end
    local params = ({ ... })[1]
    if params then
        self._posX = params
    else
        self._posX = self._owner:GetHangPointPosX()
    end
end

function CityDragLeftState:OnLeave(fsm)
    self._fsm = nil
    self._owner = nil
    self._posX = nil
end

function CityDragLeftState:Dispose()
    self:OnLeave(nil)
end

function CityDragLeftState:OnDragCity(state,go,startPos,pos,deltaTime)
    if state == LuaEasyTouchDragState.enddrag then
        self:ChangeState(self._fsm,"CityDragLeftEndState")
        return
    end
    if state == LuaEasyTouchDragState.dragging then
        if startPos.x < pos.x then
            if self._owner:IsDragRightMax() then
                self:ChangeState(self._fsm,"CityDragRightLimitState",self._posX)
            else
                self:ChangeState(self._fsm,"CityDragRightState",self._posX)
            end
            return
        end
        self._owner:OnDragLeftMove(pos)
    end
end