---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/8/8 18:06
---

---@引导

local BaseOrder = require "PopupOrder/BaseOrder"
local PopupOrder = Clazz(BaseOrder,"")
local this = PopupOrder

function PopupOrder.Execute(arg)
    if BingoBangEntry.simulateNewbieFlag then
        PopupOrder.Finish()
        return
    end
    --log.r("enter popup guide")
    if arg == 1 or arg == 2 then
        ModelList.GuideModel:OpenUI("HallCityView")
        ModelList.ApplicationGuideModel:LoadGuide("HallCityView")
    elseif arg == 3 or arg == 6 then
        --判断场景
        local playid = ModelList.CityModel.GetPlayIdByCity()
        --local playType =  Csv.GetData("city_play",playid,"play_type")
        local application_guide_ui_name =  Csv.GetData("new_game_hall",playid,"application_guide_ui_name")
        local guide_ui_name =  Csv.GetData("new_game_hall",playid,"guide_ui_name")

        if not(ViewList.PowerUpView and ViewList.PowerUpView.go and fun.get_active_self(ViewList.PowerUpView.go)) then 
            ModelList.GuideModel:OpenUI(guide_ui_name)
        end 

        ModelList.ApplicationGuideModel:LoadGuide(application_guide_ui_name)
    end
    if ModelList.GuideModel:IsGuiding() then
        this.showingGuide = true
    end
    PopupOrder.Finish()
end


function PopupOrder.IsOrderFinish()
    return this.showingGuide and true or false
end


function PopupOrder.Finish()
    log.g("brocast  EventName.Event_popup_order_finish ")
    Event.Brocast(EventName.Event_popup_order_finish, true)
end

return PopupOrder