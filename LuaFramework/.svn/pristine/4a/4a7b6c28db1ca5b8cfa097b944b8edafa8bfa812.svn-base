---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2024/12/18 16:34
---


local SpinState = Clazz(BaseFsmState, "SpinState")
local this = SpinState

function SpinState:New()
    local o = {}
    setmetatable(o, { __index = SpinState })
    return o
end

function SpinState:SpinState()
end

function SpinState:OnEnter(fsm, previous)
    log.r("SpinState:OnEnter")
    self._fsm = fsm
    self._owner = fsm:GetOwner()
    ---不做请求返回，直接切换到表现状态,测试用
    --self._fsm:ChangeState("ShowSpinState")
    AddLockCountOneStep(true)
    ModelList.GotYouModel:ReqMansionSpin(fsm:GetOwner():GetCurrBet() or 1)
    self.delayTimer = LuaTimer:SetDelayFunction(10, function ()
        if self then
            self._fsm:ChangeState("IdleState")
        end
        self.delayTimer = nil
    end)
end

function SpinState:OnSpin()

end


function SpinState:OnReceiveSpin()
    self._fsm:ChangeState("ShowSpinState")
end

function SpinState:OnChangeBet(changeType)

end

function SpinState:OnStopIdle()

end

function SpinState:OnResumeIdle()

end

function SpinState:OnLeave(fsm)
    if self.delayTimer then
        LuaTimer:Remove(self.delayTimer)
        self.delayTimer = nil
    end

    self._fsm = nil
    self._owner = nil
end

function SpinState:Dispose()
    if self.delayTimer then
        LuaTimer:Remove(self.delayTimer)
        self.delayTimer = nil
    end
    self:OnLeave(nil)
end

return this
