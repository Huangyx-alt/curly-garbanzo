---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2022/8/29 11:55
---

--- 双倍饼干活动 弹窗order

local BaseOrder = require "PopupOrder/BaseOrder"
local PopupOrder = Clazz(BaseOrder, "")
local this = PopupOrder

local isPopup = false

function PopupOrder.Execute(occasion)
    PopupOrder.Finish()
    --local isCookie = ModelList.ActivityModel:IsActivityAvailable(ActivityTypes.quickTask)
    --local isLoginOpenOrFirstOpen = (ModelList.ActivityModel:IsActivityLoginOpen(ActivityTypes.doubleCookies))
    --local uid =ModelList.PlayerInfoModel:GetUid() or ""
    --local isShowMax = false
    --local promoteCount =fun.read_value("competition_show_times_promote"..uid,0)
    --if promoteCount > Csv.GetControlByName("competition_show_times")[1][1] then
    --    isShowMax = true
    --end
    --if ModelList.CompetitionModel:IsActivityAvailable() and not ModelList.CompetitionModel:IsActivityExpire() and not isShowMax then
    --    if occasion == PopupOrderOccasion.login   then
    --        isPopup = true
    --        Event.AddListener(EventName.Event_popup_activity_double_cookie_finish, PopupOrder.Finish, this)
    --        Facade.SendNotification(NotifyName.ShowUI, ViewList.CompetitionPromotedView,nil,nil,true)
    --        fun.save_value("competition_show_times_promote"..uid,promoteCount+1)
    --    elseif not ModelList.CompetitionModel:IsShowedCompetitionOpenTip() then
    --        isPopup = true
    --        Event.AddListener(EventName.Event_popup_activity_double_cookie_finish, PopupOrder.Finish, this)
    --        Facade.SendNotification(NotifyName.ShowUI, ViewList.CompetitionPromotedView,nil,nil,true)
    --        fun.save_value("competition_show_times_promote"..uid,promoteCount+1)
    --    else
    --        PopupOrder.Finish()
    --    end
    --else
    --    PopupOrder.Finish()
    --end
end

function PopupOrder.Finish()
    Event.RemoveListener(EventName.Event_popup_activity_double_cookie_finish, PopupOrder.Finish, this)
    log.g("brocast  EventName.Event_popup_order_finish ")
    Event.Brocast(EventName.Event_popup_order_finish, true)
end

return PopupOrder