---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 28/10/2024 下午 2:10
---


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 25/10/2024 下午 3:51
---

---
---@class ScratchWinnerExtraBallItem : BaseChildView
local ScratchWinnerExtraBallItem = BaseChildView:New()
local this = ScratchWinnerExtraBallItem
this.__index = this

this.auto_bind_ui_items = {
    "ball",
    "number1",
    "number2",
    "ballType",
    "grayMask",
}

function ScratchWinnerExtraBallItem:New()
    local o = {}
    setmetatable(o, { __index = this })
    return o
end


local function GetExtraBallTpye(num)
    if num <= 15 then
        return "CallB", "b_ball_red"
    elseif num <= 30 then
        return "CallI", "b_ball_yellow"
    elseif num <= 45 then
        return "CallN", "b_ball_green"
    elseif num <= 60 then
        return "CallG", "b_ball_blue"
    else
        return "CallO", "b_ball_purple"
    end
end

--@param cardId 卡牌ID
--@param cellIndex 格子位置索引
--@param effectIndex 效果类型 1:星星 2:铃铛 3:熊娃娃 4:美元 5:钻石
--@param num 格子数字
function ScratchWinnerExtraBallItem:SetType( num)
    if num <= 9 then
        self.number1.sprite = AtlasManager:GetSpriteByName("BattleExtraAtlas", "nub_" .. num)
        fun.set_rect_local_pos(self.number1, 0, -14.1, 0)
        fun.set_active(self.number2, false)
    else
        self.number1.sprite = AtlasManager:GetSpriteByName("BattleExtraAtlas", "nub_" .. math.floor(num / 10))
        self.number2.sprite = AtlasManager:GetSpriteByName("BattleExtraAtlas", "nub_" .. math.fmod(num, 10))
    end
    local type, color = GetExtraBallTpye(num)
    self["ball"].sprite = AtlasManager:GetSpriteByName("BattleExtraAtlas", color)
    self["ballType"].sprite = AtlasManager:GetSpriteByName("BattleExtraAtlas", type)
end

--- 隐藏
function ScratchWinnerExtraBallItem:SetActive(isActive)
    if self then
        fun.set_active(self.go, isActive)
    end
end

function ScratchWinnerExtraBallItem:SetNumEffect(isEffect)
    if fun.is_not_null(self.grayMask) then
        fun.set_active(self.grayMask, not isEffect)
    end
end

return this