---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2023/6/7 11:37
---
local LobbyBundleDependencies = {
    ---@type table
    atlas = {
        "luaprefab_atlas_adventureatlas",
        "luaprefab_atlas_autohallatlas",
        "luaprefab_atlas_city1entityatlas",
        "luaprefab_atlas_city2entityatlas",
        "luaprefab_atlas_city3entityatlas",
        "luaprefab_atlas_cityatlas",
        "luaprefab_atlas_cityentityatlas",
        "luaprefab_atlas_giftpackatlas",
        "luaprefab_atlas_giftpackiconatlas",
        "luaprefab_atlas_hallmainatlas",
        "luaprefab_atlas_lobbyplay1entityatlas",
        "luaprefab_atlas_lobbyplay2entityatlas",
        "luaprefab_atlas_lobbyplay3entityatlas",
        "luaprefab_atlas_powerupatlas",
        "luaprefab_atlas_powerupbackgroundatlas",
        "luaprefab_atlas_poweruphintatlas",
        "luaprefab_atlas_shopatlas",
        "luaprefab_atlas_specialgameplay",
        "luaprefab_atlas_vipatlas",
        "luaprefab_atlas_taskatlas",
        "luaprefab_atlas_mailatlas",
        "luaprefab_atlas_bingopassatlas",
        "luaprefab_atlas_foodbagclaimatlas",
        "luaprefab_atlas_sceneloadinggameatlas",
        "luaprefab_atlas_minigame01atlas",
        "luaprefab_atlas_minigame01popupatlas",
        "luaprefab_atlas_rouletteconfirmatlas",
        "luaprefab_atlas_competitionreadyatlas",
        "luaprefab_atlas_poweruphelperatlas",
    },
    ---@type table
    other ={
        "luaprefab_uiviews_mail",
        "luaprefab_prefabs_city_functioniconbingopass",
        "luaprefab_prefabs_city_functioniconcoupon",
        "luaprefab_prefabs_city_functioniconcuisines",
        "luaprefab_prefabs_city_functioniconmagnifylens",
        "luaprefab_prefabs_city_functioniconmail",
        "luaprefab_prefabs_city_functioniconminigame",
        "luaprefab_minigame_minigame01",
        "luaprefab_minigame_minigame01popup",
        "luaprefab_prefabs_city_functioniconpuzzle",
        "luaprefab_prefabs_city_functionicontask",
        "luaprefab_textures_trophy_zbjb01",
        "luaprefab_textures_trophy_zbjb08",
        "luaprefab_uiviews_city_jackpotenable",
        "luaprefab_uiviews_doublerewards",
        "luaprefab_uiviews_giftpack_clock",
        "luaprefab_uiviews_popup_adventure",
        "luaprefab_uiviews_poweruphint",
        "luaprefab_uiviews_Puzzle",
        "luaprefab_uiviews_specialgameplay_itemsgpinmain",
        "luaprefab_uiviews_topconsole",
        "luaprefab_uiviews_powerup",
        "luaprefab_uiviews_poweruphelper",
        "luaprefab_uiviews_powerupcardshowtip",
    }
}
local this = LobbyBundleDependencies

local unload_coroutine = nil
function LobbyBundleDependencies:StartUnload()
    local delay = 0.3
    unload_coroutine=  coroutine.start(function()
        for i = 1, #this.other do
            --Done LwangZg 资源卸载
            ResourcesManager:UnloadAsset(this.other[i], false)
            coroutine.wait(delay)
        end
        for i = 1, #this.atlas do
            --Done LwangZg 资源卸载
            -- resMgr:UnloadAssetBundle(this.atlas[i], false)
            ResourcesManager:UnloadAsset(this.atlas[i], false)
            coroutine.wait(delay)
        end
        -- coroutine.wait(delay)
        -- --UnityEngine.Resources.UnloadUnusedAssets()
    end)
    if not unload_coroutine then
        for i = 1, #this.other do
            --Done LwangZg 资源卸载
            -- resMgr:UnloadAssetBundle(this.other[i], false)
            ResourcesManager:UnloadAsset(this.other[i], false)
        end
        for i = 1, #this.atlas do
            --Done LwangZg 资源卸载
            -- resMgr:UnloadAssetBundle(this.atlas[i], false)
            ResourcesManager:UnloadAsset(this.atlas[i], false)
        end
    else
        unload_coroutine = nil
    end
end

function LobbyBundleDependencies:StopUnload()
    if unload_coroutine then
        coroutine.stop(unload_coroutine)
        unload_coroutine = nil
    end
end


return this