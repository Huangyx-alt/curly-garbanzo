---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2025/2/10 15:11
---
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2025/2/10 15:11
---
local SGMoneyBuildingDataCmp = {}
local this = SGMoneyBuildingDataCmp

function SGMoneyBuildingDataCmp:Init()
    self:RegEvent()
end


function SGMoneyBuildingDataCmp:RegEvent()
    if(self.MsgIdList )then
        for k1, v1 in ipairs(self.MsgIdList) do
            if v1.msgid then Message.AddMessage(v1.msgid, v1.func) end
        end
    end
end

function SGMoneyBuildingDataCmp:UnRegEvent()
    if(self.MsgIdList )then
        for k1, v1 in ipairs(self.MsgIdList) do
            if v1.msgid then Message.RemoveMessage(v1.msgid) end
        end
    end
end

--刮刮乐玩法，收到摇球机数据
function SGMoneyBuildingDataCmp.ResponeMansionInfo(code, data)
    if code == RET.RET_SUCCESS then
        if not data.gameId or data.gameId == "" then
            --为空重置游戏
            --return
        end
        this.MansionInfo = data
        ---不在战斗中,弹窗
        if not ModelList.BattleModel:IsGameing() then
            ViewList.SGMoneyBuildingMainView = require("View.Bingo.SettleModule.UIView.SmallGame.Normal.SGMoneyBuildingMainView")
        end
    end
end

--刮刮乐玩法，返回摇奖结果
function SGMoneyBuildingDataCmp.ResponeMansionSpin(code, data)
    if code == RET.RET_SUCCESS then
        this.MansionSpinInfo = data
        if ViewList.SGMoneyBuildingMainView then
            ViewList.SGMoneyBuildingMainView:OnSpinReward(data)
        end
    end
end

function SGMoneyBuildingDataCmp:ReqSGInfo(...)
    Network.SendMessage(MSG_ID.MSG_GAME_MONEY_MANSION_FOR_MAIN_SPIN,{ rate = ... })
end


--刮刮乐玩法，入场清除ScratchBallShakerData
function SGMoneyBuildingDataCmp:ClearData()
    self.MansionInfo = nil
    self:UnRegEvent()
end

function SGMoneyBuildingDataCmp:SaveScratchBallShakerData(data)
    self.MansionInfo = data
end

--在小火箭界面,需要用到的小游戏数据
function SGMoneyBuildingDataCmp:GetSmallGameData()
    return nil
end

--在正式结算之后,需要用到的小游戏数据
function SGMoneyBuildingDataCmp:GetSmallGameData2()
    return this.MansionInfo
end

--获取其他数据的接口
function SGMoneyBuildingDataCmp:GetExtraSmallGameData()
    return this.MansionSpinInfo
end

this.MsgIdList = {
    { msgid = MSG_ID.MSG_GAME_MONEY_MANSION_FOR_MAIN_INFO, func = this.ResponeMansionInfo },
    { msgid = MSG_ID.MSG_GAME_MONEY_MANSION_FOR_MAIN_SPIN, func = this.ResponeMansionSpin },

}

return SGMoneyBuildingDataCmp
