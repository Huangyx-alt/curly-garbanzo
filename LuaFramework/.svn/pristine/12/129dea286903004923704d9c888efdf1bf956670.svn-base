---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2024/12/18 16:32
---

local ShowBingoState = Clazz(BaseFsmState, "ShowBingoState")
local this = ShowBingoState

function ShowBingoState:New()
    local o = {}
    setmetatable(o, { __index = ShowBingoState })
    return o
end

function ShowBingoState:ShowBingoState()
end

function ShowBingoState:OnEnter(fsm, previous)
    self._fsm = fsm
    self._owner = fsm:GetOwner()
    log.r("ShowBingoState:OnEnter")

    self:PlayBingoEnter()
    self._owner:SetOpenState()
    --self:start_x_update()
end


function ShowBingoState:PlayBingoEnter()
    local delayTime = 0
    --ModelList.GotYouModel:GetSmallGameData2().freeSpinTimes = 2
    local freeSpinTimes = ModelList.GotYouModel:GetSmallGameData2().freeSpinTimes
    if freeSpinTimes > 0 then
        if freeSpinTimes > 0 then
            self._owner:SetBingoCount(freeSpinTimes)
            delayTime = 2
        end
    end
    if delayTime == 0 then
        self._fsm:ChangeState("IdleState")
    else
        LuaTimer:SetDelayFunction(delayTime, function ()
            if not ModelList.GuideModel:IsGuideComplete(89) and ModelList.BattleModel:IsGameing() then
                self._owner:ShowGuide(2)
            else
                self._fsm:ChangeState("IdleState")
            end
        end)
    end
end

function ShowBingoState:OnSpin()

end

function ShowBingoState:OnChangeBet(changeType)

end

function ShowBingoState:OnReceiveSpin()
end
function ShowBingoState:OnStopIdle()

end

function ShowBingoState:OnResumeIdle()

end

function ShowBingoState:OnLeave(fsm)
    self._fsm = nil
    self._owner = nil
end

function ShowBingoState:Dispose()
    self:OnLeave(nil)
end

return this
