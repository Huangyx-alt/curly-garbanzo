---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2021/8/28 21:04
---

CityDragOriginalState = Clazz(CityDragBaseState,"CityDragOriginalState")

function CityDragOriginalState:OnEnter(fsm)
    self._fsm = fsm
    self._owner = fsm:GetOwner()
end

function CityDragOriginalState:OnLeave(fsm)
    self._fsm = nil
    self._owner = nil
end

function CityDragOriginalState:Dispose()
    self:OnLeave(nil)
end

function CityDragOriginalState:EnterHallCity(fsm,params1,params2,params3)
    if fsm then
        self:ChangeState(fsm,"CityDragStiffState",params1,params2,params3)
    end
end

function CityDragOriginalState:OnDragCity(state,go,startPos,pos,deltaTime)
    if state ~= LuaEasyTouchDragState.startdrag then
        return
    end
    if self._owner then
        self._owner:OnStartDrag(go,pos)
    end
    if self._owner then
        if startPos.x > pos.x then --向左划
            if self._owner:IsDragLeftMax() then
                self:ChangeState(self._fsm,"CityDragLeftLimitState")
            else
                self:ChangeState(self._fsm,"CityDragLeftState")
            end
        elseif startPos.x < pos.x then --向右划
            if self._owner:IsDragRightMax() then
                self:ChangeState(self._fsm,"CityDragRightLimitState")
            else
                self:ChangeState(self._fsm,"CityDragRightState")
            end
        end
    end
end

function CityDragOriginalState:CanDragCity()
    return true
end

function CityDragOriginalState:OnTurnCityRight(fsm,params)
    if fsm then
        if fsm:GetOwner():IsDragLeftMax() then

        else
            self:ChangeState(fsm,"CityTurnPageRight",params)
        end
    end
end

function CityDragOriginalState:OnTurnCityLeft(fsm,params)
    if fsm then
        if fsm:GetOwner():IsDragRightMax() then

        else
            self:ChangeState(fsm,"CityTurnPageLeft",params)
        end
    end
end   

function CityDragOriginalState:OnBtnBingoClick(fsm,is2MaxCity,cityId,playId)
    if fsm then
        self:ChangeState(fsm,"CityDragStiffState",CityDragStiffParams.clickEnterCity,is2MaxCity,cityId,playId)
    end
end

function CityDragOriginalState:AutoDragCity(fsm,is2MaxCity,cityId,playId)
    if fsm then
        fsm:GetOwner():OnAutoDragCity(is2MaxCity,cityId,playId)
    end
end

function CityDragOriginalState:OnBtnAutoClick(fsm)
    if fsm then
        fsm:GetOwner():OnBtnAutoClick()
    end
end

function CityDragOriginalState:CanClickCity()
    return true
end