---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 15610.
--- DateTime: 2023/4/22 22:05
---

local QuickTaskBaseState = require "State/QuickTaskView/QuickTaskBaseState"
local CompetitionDoubleEnterState = Clazz(QuickTaskBaseState,"CompetitionDoubleEnterState")

function CompetitionDoubleEnterState:OnEnter(fsm,previous,...)
    if fsm and self:CheckSkip() then
        return
    end
    log.r("enter  CompetitionDoubleEnterState")
    self.owner = fsm:GetOwner()
    self.fsm = fsm
    local isDoubleActive = fun.get_active_self(self.owner.BackgroundDouble)
    local isDoubleCollect = ModelList.CompetitionModel:GetDoubleCollectBuffTime() > 0
    if not isDoubleActive and isDoubleCollect then
        local animName = {"doubleenter","efTopQuickTaskViewidoubleenter"}
        log.r("AnimatorPlayHelper  play   doubleenter ")
        AnimatorPlayHelper.Play( self.owner.anima,{animName[1],animName[2]},false,function()
            log.r("entr over")
            self.owner:ShowDoubleSign(true)
            self:PlayOver()
        end)
    else
        self:PlayOver()
    end
end

function CompetitionDoubleEnterState:OnLeave(fsm)
end

function CompetitionDoubleEnterState:on_x_update()

end

function CompetitionDoubleEnterState:TweenSliderFinish(fsm)

end


function CompetitionDoubleEnterState:PlayOver()
    log.r("CompetitionDoubleEnterState  playover")
    self.fsm:ChangeState("CompetitionExtraRewardState")
end

return CompetitionDoubleEnterState