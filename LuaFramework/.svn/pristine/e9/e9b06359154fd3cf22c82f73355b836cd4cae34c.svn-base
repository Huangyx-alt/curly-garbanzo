---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by PC.
--- DateTime: 2023/4/23 15:31
---

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 15610.
--- DateTime: 2023/4/22 21:14
---

local QuickTaskBaseState = require "State/QuickTaskView/QuickTaskBaseState"
local CompetitionSliderState = Clazz(QuickTaskBaseState,"CompetitionSliderState")
function CompetitionSliderState:OnEnter(fsm,previous,...)
    log.r("enter  CompetitionSliderState")
    self.owner = fsm:GetOwner()
    self.fsm = fsm
    self.owner:SetTaskInfo2()
    self:start_x_update()
end

function CompetitionSliderState:OnLeave(fsm)
end

function CompetitionSliderState:on_x_update()
    if self.owner.anima then
        if  self.owner.anima:GetCurrentAnimatorStateInfo(0) :IsName("idle1") or
                self.owner.anima:GetCurrentAnimatorStateInfo(0) :IsName("2end") then
            self:stop_x_update()
            self:PlayOver()
        end
    end
end

function CompetitionSliderState:TweenSliderFinish(fsm)

end


function CompetitionSliderState:PlayOver()
    local isDoubleCollect = ModelList.CompetitionModel:GetDoubleCollectBuffTime() > 0
    if isDoubleCollect then
        self.fsm:ChangeState("CompetitionDoubleEnterState")
    else
        self.fsm:ChangeState("CompetitionExtraRewardState")
    end
    --self.fsm:ChangeState("QuickTaskOriginalState")
end

return CompetitionSliderState